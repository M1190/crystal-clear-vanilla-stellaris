entertainer_job_check_trigger = {
	custom_tooltip = SPECIALIST_JOB_TRIGGER
	hidden_trigger = {
		exists = owner
		OR = {
			is_enslaved = no
			has_slavery_type = {
				type = slavery_domestic
			}
			AND = {
				has_slavery_type = {
					type = slavery_indentured
				}
				owner = {
					has_valid_civic = civic_indentured_assets
				}
			}
			AND = {
				NOT = {
					host_has_dlc = "Utopia"
				}
				is_same_species = owner_main_species
				owner = {
					OR = {
						has_valid_civic = civic_indentured_assets
						has_valid_civic = civic_slaver_guilds
					}
				}
			}
		}
		is_being_purged = no
		is_being_assimilated = no
		NOT = {
			has_trait = trait_syncretic_proles
		}
		can_think = yes
		NOT = {
			has_trait = trait_presapient_docile_livestock
		}
		OR = {
			NOT = {
				has_trait = trait_mechanical
			}
			owner = {
				has_technology = tech_droid_workers
			}
		}
		NOT = {
			has_citizenship_type = {
				type = citizenship_organic_trophy
			}
		}
		if = {
			limit = {
				divinity_right_to_work_job_check_trigger_exempt = no
			}
			divinity_right_to_work_job_check_trigger_specialist = yes
		}
	}
}

battle_thrall_job_check_trigger = {
	custom_tooltip = BATTLE_THRALL_JOB_TRIGGER
	hidden_trigger = {
		exists = owner
		OR = {
			is_enslaved = no
			has_slavery_type = {
				type = slavery_military
			}
			AND = {
				has_slavery_type = {
					type = slavery_indentured
				}
				owner = {
					has_valid_civic = civic_indentured_assets
				}
			}
			AND = {
				NOT = {
					host_has_dlc = "Utopia"
				}
				is_same_species = owner_main_species
				owner = {
					OR = {
						has_valid_civic = civic_indentured_assets
						has_valid_civic = civic_slaver_guilds
					}
				}
			}
		}
		is_being_purged = no
		is_being_assimilated = no
		NOT = {
			has_trait = trait_syncretic_proles
		}
		can_think = yes
		NOT = {
			has_trait = trait_presapient_docile_livestock
		}
		NOT = {
			has_military_service_type = {
				type = military_service_none
			}
		}
		OR = {
			NOT = {
				has_trait = trait_mechanical
			}
			owner = {
				has_technology = tech_droid_workers
			}
		}
		NOT = {
			has_citizenship_type = {
				type = citizenship_organic_trophy
			}
		}
		if = {
			limit = {
				divinity_right_to_work_job_check_trigger_exempt = no
			}
			divinity_right_to_work_job_check_trigger_specialist = yes
		}
	}
}

complex_drone_job_check_trigger = {
	custom_tooltip = DRONE_JOB_TRIGGER
	hidden_trigger = {
		has_citizenship_rights = yes
		can_think = yes
		NOT = {
			has_trait = trait_syncretic_proles
		}
		NOT = {
			has_trait = trait_presapient_docile_livestock
		}
	}
}

divinity_right_to_work_job_check_trigger_worker = {
	NOT = {
		planet = {
			any_owned_pop = {
				OR = {
					is_unemployed = yes
					has_job = servant_noble
				}
				is_robotic_species = no
				is_pop_category = worker
			}
		}
	}
}

### BUILDING TRIGGERS ###
buildings_unemployed = {
	planet = {
		any_owned_pop = {
			NOT = {
				has_citizenship_type = {
					type = citizenship_organic_trophy
				}
			}
			NOR = {
				is_pop_category = specialist
				is_pop_category = ruler
			}
			OR = {
				is_unemployed = yes
				has_job = servant
				has_job = servant_noble
				has_job = grunt
			}
		}
	}
}

overlord_has_num_armies_on_planet = {
	count_planet_army = {
		count = $NUM$
		limit = {
			exists = owner
			exists = ROOT.owner
			OR = {
				ROOT.owner = {
					has_overlord = PREV.owner
				}
				has_army_flag = overlord_garrison
			}
		}
	}
}

overlord_has_more_than_num_armies_on_planet = {
	count_planet_army = {
		count > $NUM$
		limit = {
			exists = owner
			exists = ROOT.owner
			OR = {
				ROOT.owner = {
					has_overlord = PREV.owner
				}
				has_army_flag = overlord_garrison
			}
		}
	}
}

### POP TRIGGERS ###
is_crossbreeding_possible = {
	is_sapient = yes
	NOR = {
		has_trait = trait_machine_unit
		has_trait = trait_mechanical
		has_trait = trait_hive_mind
		has_trait = trait_self_modified
		has_trait = trait_clones
		has_trait = trait_clone_soldier_infertile
		has_trait = trait_clone_soldier_infertile_full_potential
		is_half_species = any
		count_galaxy_species = {
			count > 7
			limit = {
				is_half_species = PREV
			}
		}
	}
}

### REFUGEE TRIGGERS ###
is_valid_refugee_pop = {
	is_robot_pop = no
	has_culture_shock = no
	can_think = yes
	NOR = {
		has_trait = trait_hive_mind
	}
	owner = {
		any_relation = {
			is_country_type = default
			has_communications = prev			#relations include countries that have made first contact but not established comms
			NOT = {
				has_policy_flag = refugees_not_allowed
			}
			prevprev = {
				#this ensures Pop scope, as root will not always be pop scope
				OR = {
					has_citizenship_type = {
						type = citizenship_full
						country = prev
					}
					prev = {
						has_policy_flag = refugees_allowed
					}
				}
				NOR = {
					has_citizenship_type = {
						type = citizenship_slavery
						country = prev
					}
					has_citizenship_type = {
						type = citizenship_purge
						country = prev
					}
				}
			}
			any_owned_planet = {
				is_under_colonization = no
				is_controlled_by = owner
				has_orbital_bombardment = no
				habitability = {
					who = prevprevprev
					value >= 0.2
				}
			}
		}
	}
}

has_any_habitability = {
	is_country_type = default
	has_communications = prev
	NOT = {
		has_policy_flag = refugees_not_allowed
	}
	event_target:refugee_pop = {
		OR = {
			has_citizenship_type = {
				type = citizenship_full
				country = prev
			}
			prev = {
				has_policy_flag = refugees_allowed
			}
		}
		NOR = {
			has_citizenship_type = {
				type = citizenship_slavery
				country = prev
			}
			has_citizenship_type = {
				type = citizenship_purge
				country = prev
			}
		}
	}
	any_owned_planet = {
		is_under_colonization = no
		is_controlled_by = owner
		has_orbital_bombardment = no
	}
}

### EMPIRE TRIGGERS ###
country_uses_food = {
	OR = {
		is_catalytic_empire = yes
		has_origin = origin_tree_of_life
		has_origin = origin_sacred_tree
		has_valid_civic = civic_agribusiness
		any_owned_species = {
			NOR = {
				has_trait = trait_lithoid
				has_trait = trait_machine_unit
				has_trait = trait_mechanical
			}
			is_sapient = yes
			NOR = {
				has_citizenship_type = {
					type = citizenship_purge
					country = prev
				}
				has_citizenship_type = {
					type = citizenship_purge_machine
					country = prev
				}
			}
		}
	}
}

country_uses_consumer_goods = {
	OR = {
		is_regular_empire = yes
		has_valid_civic = civic_machine_servitor
		any_owned_pop = {
			is_pop_category = resident_gestalt
		}
	}
}

is_unfriendly = {
	OR = {
		has_valid_civic = civic_fanatic_purifiers
		has_valid_civic = civic_machine_terminator
		has_valid_civic = civic_hive_devouring_swarm
		has_valid_civic = civic_barbaric_despoilers
		has_valid_civic = civic_living_hosts
		has_valid_civic = civic_infestation
	}
}

is_reanimator = {
	OR = {
		has_valid_civic = civic_reanimated_armies
		has_valid_civic = civic_permanent_employment
		has_valid_civic = civic_hive_reanimated_armies
	}
}

is_memorialist_empire = {
	OR = {
		has_valid_civic = civic_memorialist
		has_valid_civic = civic_memorialist_corp
		has_valid_civic = civic_hive_memorialist
		has_valid_civic = civic_machine_memorialist
	}
}

has_total_war_cb = {
	OR = {
		#attacker checks
		AND = {
			OR = {
				is_country_type = default
				is_country_type = awakened_fallen_empire
				is_country_type = fallen_empire
			}
			OR = {
				is_country_type = awakened_fallen_empire
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_infestation
				has_valid_civic = civic_machine_assimilator
				AND = {
					has_valid_civic = civic_machine_terminator
					from = {
						NOR = {
							has_country_flag = synthetic_empire
							has_authority = auth_machine_intelligence
						}
					}
				}
				AND = {
					has_valid_civic = civic_fanatic_purifiers
					NOT = {
						is_same_species = from
					}
				}
			}
		}
		#end threat checks
		AND = {
			is_country_type = default
			NOR = {
				is_country_type = awakened_fallen_empire
				has_valid_civic = civic_fanatic_purifiers
				has_valid_civic = civic_hive_devouring_swarm
				has_valid_civic = civic_machine_assimilator
				has_valid_civic = civic_machine_terminator
				has_valid_civic = civic_infestation
			}
			from = {
				OR = {
					is_country_type = awakened_fallen_empire
					has_valid_civic = civic_fanatic_purifiers
					has_valid_civic = civic_hive_devouring_swarm
					has_valid_civic = civic_machine_assimilator
					has_valid_civic = civic_machine_terminator
					has_valid_civic = civic_infestation
				}
			}
		}
	}
}

is_autocracy = {
	OR = {
		has_ethic = ethic_gestalt_consciousness
		has_authority = auth_imperial
		has_authority = auth_dictatorial
		has_authority = auth_bugged_corporate_imperial
	}
}

is_oligarchy = {
	OR = {
		has_authority = auth_oligarchic
		has_authority = auth_corporate
	}
}

is_democracy = {
	has_authority = auth_democratic
	has_authority = auth_bugged_corporate_democratic
}

has_generic_government = {
	OR = {
		has_government = gov_despotic_empire
		has_government = gov_feudal_empire
		has_government = gov_constitutional_dictatorship
		has_government = gov_plutocratic_oligarchy
		has_government = gov_representative_democracy
		has_government = gov_parliamentary_democracy
		has_government = gov_aristocracy
		has_government = merchant_republic
		has_government = gov_mining_clans
	}
}

has_spiritualist_government = {
	OR = {
		has_government = gov_theocratic_monarchy
		has_government = gov_theocratic_dictatorship
		has_government = gov_theocratic_oligarchy
		has_government = gov_theocratic_republic
		has_government = gov_divine_empire
		has_government = gov_holy_tribunal
		has_government = gov_mortal_empire
		has_government = gov_mortiferous_exarchate
		has_government = gov_grim_council
		has_government = gov_mortal_brotherhood
		has_government = gov_megachurch
		has_government = gov_private_megachurch
		has_government = gov_sacrificial_megachurch
		has_government = gov_private_sacrificial_megachurch
		has_government = gov_celestial_choir
		has_government = gov_celestial_theocracy
		has_government = gov_celestial_monarchy
		has_government = gov_crusader_kingdom
		has_government = gov_holy_order
	}
}

has_militarist_government = {
	OR = {
		has_government = gov_star_empire
		has_government = gov_military_dictatorship
		has_government = gov_military_junta
		has_government = gov_military_commissariat
		has_government = gov_martial_empire
		has_government = gov_martial_dictatorship
		has_government = gov_war_council
		has_government = gov_assembly_of_clans
		has_government = gov_citizen_stratocracy
		has_government = gov_citizen_republic
		has_government = gov_benevolent_empire
		has_government = gov_compassionate_order
		has_government = gov_friendship_committee
		has_government = gov_harmony_assembly
	}
}

has_pacifist_government = {
	OR = {
		has_government = gov_irenic_monarchy
		has_government = gov_irenic_dictatorship
		has_government = gov_irenic_bureaucracy
		has_government = gov_moral_democracy
		has_government = gov_celestial_empire
		has_government = gov_enlightened_iron_despot
		has_government = gov_peasant_commune
	}
}

has_materialist_government = {
	OR = {
		has_government = gov_despotic_hegemony
		has_government = gov_totalitarian_regime
		has_government = gov_executive_committee
		has_government = gov_direct_democracy
		has_government = gov_illuminated_autocracy
		has_government = gov_technocratic_dictatorship
		has_government = gov_science_directorate
		has_government = gov_rational_consensus
		has_government = gov_iron_despot
		has_government = gov_totalitarian_iron_despot
		has_government = gov_plutocratic_iron_despot
		has_government = gov_scholastic_commonwealth
	}
}

#Country scope
#Note: empires which cannot do diplomacy are already excluded from Espionage
has_hostile_espionage_operation_ethics = {
	OR = {
		has_ethic = ethic_xenophobe
		has_ethic = ethic_fanatic_xenophobe
		has_authority = auth_machine_intelligence
		has_authority = auth_hive_mind
	}
	NOR = {
		has_valid_civic = civic_harm_hive
		has_valid_civic = civic_harm_machine
		has_origin = origin_symbiote
		has_origin = origin_extant_creators
	}
}

### PLANET TRIGGERS ###
### FACTION TRIGGERS ###
is_faction_allowed = {
	OR = {
		has_country_flag = testing_factions
		AND = {
			years_passed > 10
			has_encountered_other_species = yes
		}
		years_passed > 25
		AND = {
			days_passed > 30
			OR = {
				has_valid_civic = civic_parliamentary_system
				has_valid_civic = civic_parliamentary_system_corp
			}
		}
	}
	NOT = {
		has_ethic = ethic_gestalt_consciousness
	}
	NOT = {
		has_country_flag = suppress_vanilla_factions
	}
}
